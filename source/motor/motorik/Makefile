SOURCES=uart_lib.c servo.c  \
		../../IK/ik.c gangstil.c

SOURCES_AVR=../../communication/spi.c ../../communication/communication.c

SOURCES_MAIN=motorik.c

SOURCES_UNIT=unit.c

build:
	avr-gcc -mmcu=atmega1284p -Wall -Os -o src.elf \
		${SOURCES} ${SOURCES_AVR} ${SOURCES_MAIN} -DF_CPU=16000000

x86:
	gcc ${SOURCES} ${SOURCES_MAIN} -DIS_X86 -Wall -lm -g

test:
	make x86
	./a.out

unit:
	gcc ${SOURCES} ${SOURCES_UNIT} -DIS_X86 -Wall -lm -g -lcheck -o unit_tests
	./unit_tests

#avr-objcopy -j .text -j .data -O ihex src.elf src.hex

